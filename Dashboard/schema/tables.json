{
  "collect.wait_stats": {
    "description": "Cumulative wait statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "wait_type": { "type": "nvarchar(60)", "nullable": false },
      "waiting_tasks_count": { "type": "bigint", "nullable": false },
      "wait_time_ms": { "type": "bigint", "nullable": false },
      "signal_wait_time_ms": { "type": "bigint", "nullable": false },
      "waiting_tasks_count_delta": { "type": "bigint", "nullable": true },
      "wait_time_ms_delta": { "type": "bigint", "nullable": true },
      "signal_wait_time_ms_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true },
      "wait_time_ms_per_second": { "type": "computed", "nullable": true, "formula": "wait_time_ms_delta / NULLIF(sample_interval_seconds, 0)" },
      "signal_wait_time_ms_per_second": { "type": "computed", "nullable": true, "formula": "signal_wait_time_ms_delta / NULLIF(sample_interval_seconds, 0)" }
    },
    "primary_key": ["collection_id"]
  },
  "collect.query_stats": {
    "description": "Query performance statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "object_type": { "type": "nvarchar(20)", "nullable": false, "note": "STATEMENT, PROCEDURE, TRIGGER, FUNCTION" },
      "database_name": { "type": "sysname", "nullable": false },
      "object_name": { "type": "sysname", "nullable": true },
      "schema_name": { "type": "sysname", "nullable": true },
      "sql_handle": { "type": "varbinary(64)", "nullable": false },
      "statement_start_offset": { "type": "integer", "nullable": false },
      "statement_end_offset": { "type": "integer", "nullable": false },
      "plan_generation_num": { "type": "bigint", "nullable": false },
      "plan_handle": { "type": "varbinary(64)", "nullable": false },
      "creation_time": { "type": "datetime2(7)", "nullable": false },
      "last_execution_time": { "type": "datetime2(7)", "nullable": false },
      "execution_count": { "type": "bigint", "nullable": false },
      "total_worker_time": { "type": "bigint", "nullable": false },
      "min_worker_time": { "type": "bigint", "nullable": false },
      "max_worker_time": { "type": "bigint", "nullable": false },
      "total_physical_reads": { "type": "bigint", "nullable": false },
      "min_physical_reads": { "type": "bigint", "nullable": false },
      "max_physical_reads": { "type": "bigint", "nullable": false },
      "total_logical_writes": { "type": "bigint", "nullable": false },
      "total_logical_reads": { "type": "bigint", "nullable": false },
      "total_clr_time": { "type": "bigint", "nullable": false },
      "total_elapsed_time": { "type": "bigint", "nullable": false },
      "min_elapsed_time": { "type": "bigint", "nullable": false },
      "max_elapsed_time": { "type": "bigint", "nullable": false },
      "query_hash": { "type": "binary(8)", "nullable": true },
      "query_plan_hash": { "type": "binary(8)", "nullable": true },
      "total_rows": { "type": "bigint", "nullable": false },
      "min_rows": { "type": "bigint", "nullable": false },
      "max_rows": { "type": "bigint", "nullable": false },
      "total_spills": { "type": "bigint", "nullable": false },
      "min_spills": { "type": "bigint", "nullable": false },
      "max_spills": { "type": "bigint", "nullable": false },
      "execution_count_delta": { "type": "bigint", "nullable": true },
      "total_worker_time_delta": { "type": "bigint", "nullable": true },
      "total_elapsed_time_delta": { "type": "bigint", "nullable": true },
      "total_logical_reads_delta": { "type": "bigint", "nullable": true },
      "total_physical_reads_delta": { "type": "bigint", "nullable": true },
      "total_logical_writes_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true },
      "avg_rows": { "type": "computed", "nullable": true },
      "avg_worker_time_ms": { "type": "computed", "nullable": true },
      "avg_elapsed_time_ms": { "type": "computed", "nullable": true },
      "avg_physical_reads": { "type": "computed", "nullable": true },
      "worker_time_per_second": { "type": "computed", "nullable": true },
      "query_text": { "type": "nvarchar(max)", "nullable": true },
      "query_plan_text": { "type": "nvarchar(max)", "nullable": true },
      "query_plan": { "type": "xml", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.memory_stats": {
    "description": "Memory pressure and utilization metrics",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "buffer_pool_mb": { "type": "decimal(19,2)", "nullable": false },
      "plan_cache_mb": { "type": "decimal(19,2)", "nullable": false },
      "other_memory_mb": { "type": "decimal(19,2)", "nullable": false },
      "total_memory_mb": { "type": "decimal(19,2)", "nullable": false },
      "physical_memory_in_use_mb": { "type": "decimal(19,2)", "nullable": false },
      "available_physical_memory_mb": { "type": "decimal(19,2)", "nullable": false },
      "memory_utilization_percentage": { "type": "integer", "nullable": false },
      "buffer_pool_pressure_warning": { "type": "bit", "nullable": false },
      "plan_cache_pressure_warning": { "type": "bit", "nullable": false },
      "buffer_pool_percentage": { "type": "computed", "nullable": true },
      "plan_cache_percentage": { "type": "computed", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.memory_pressure_events": {
    "description": "Memory pressure events from ring buffer",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "sample_time": { "type": "datetime2(7)", "nullable": false },
      "memory_notification": { "type": "nvarchar(100)", "nullable": false },
      "memory_indicators_process": { "type": "integer", "nullable": false },
      "memory_indicators_system": { "type": "integer", "nullable": false }
    },
    "primary_key": ["collection_id"]
  },
  "collect.deadlock_xml": {
    "description": "Raw deadlock XML for analysis with sp_BlitzLock",
    "columns": {
      "id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "event_time": { "type": "datetime2(7)", "nullable": true },
      "deadlock_xml": { "type": "xml", "nullable": false }
    },
    "primary_key": ["id"]
  },
  "collect.blocked_process_xml": {
    "description": "Raw blocked process XML for analysis with sp_HumanEventsBlockViewer",
    "columns": {
      "id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "event_time": { "type": "datetime2(7)", "nullable": true },
      "blocked_process_xml": { "type": "xml", "nullable": false }
    },
    "primary_key": ["id"]
  },
  "collect.blocking_deadlock_stats": {
    "description": "Aggregated blocking and deadlock statistics by database with deltas",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "database_name": { "type": "sysname", "nullable": false },
      "blocking_event_count": { "type": "bigint", "nullable": false },
      "total_blocking_duration_ms": { "type": "bigint", "nullable": false },
      "max_blocking_duration_ms": { "type": "bigint", "nullable": false },
      "avg_blocking_duration_ms": { "type": "decimal(19,2)", "nullable": true },
      "deadlock_count": { "type": "bigint", "nullable": false },
      "total_deadlock_wait_time_ms": { "type": "bigint", "nullable": false },
      "victim_count": { "type": "bigint", "nullable": false },
      "blocking_event_count_delta": { "type": "bigint", "nullable": true },
      "total_blocking_duration_ms_delta": { "type": "bigint", "nullable": true },
      "max_blocking_duration_ms_delta": { "type": "bigint", "nullable": true },
      "deadlock_count_delta": { "type": "bigint", "nullable": true },
      "total_deadlock_wait_time_ms_delta": { "type": "bigint", "nullable": true },
      "victim_count_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.cpu_utilization_stats": {
    "description": "CPU utilization from ring buffer scheduler monitor",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "sample_time": { "type": "datetime2(7)", "nullable": false },
      "sqlserver_cpu_utilization": { "type": "integer", "nullable": false },
      "other_process_cpu_utilization": { "type": "integer", "nullable": false },
      "total_cpu_utilization": { "type": "computed", "nullable": false, "formula": "sqlserver_cpu_utilization + other_process_cpu_utilization" }
    },
    "primary_key": ["collection_id"]
  },
  "collect.file_io_stats": {
    "description": "File I/O statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "database_id": { "type": "integer", "nullable": false },
      "database_name": { "type": "sysname", "nullable": true },
      "file_id": { "type": "integer", "nullable": false },
      "file_name": { "type": "sysname", "nullable": true },
      "file_type_desc": { "type": "nvarchar(60)", "nullable": true },
      "physical_name": { "type": "nvarchar(260)", "nullable": true },
      "size_on_disk_bytes": { "type": "bigint", "nullable": true },
      "num_of_reads": { "type": "bigint", "nullable": true },
      "num_of_bytes_read": { "type": "bigint", "nullable": true },
      "io_stall_read_ms": { "type": "bigint", "nullable": true },
      "num_of_writes": { "type": "bigint", "nullable": true },
      "num_of_bytes_written": { "type": "bigint", "nullable": true },
      "io_stall_write_ms": { "type": "bigint", "nullable": true },
      "io_stall_ms": { "type": "bigint", "nullable": true },
      "num_of_reads_delta": { "type": "bigint", "nullable": true },
      "num_of_bytes_read_delta": { "type": "bigint", "nullable": true },
      "io_stall_read_ms_delta": { "type": "bigint", "nullable": true },
      "num_of_writes_delta": { "type": "bigint", "nullable": true },
      "num_of_bytes_written_delta": { "type": "bigint", "nullable": true },
      "io_stall_write_ms_delta": { "type": "bigint", "nullable": true },
      "io_stall_ms_delta": { "type": "bigint", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.tempdb_stats": {
    "description": "TempDB space usage and contention metrics",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "user_object_reserved_page_count": { "type": "bigint", "nullable": false },
      "internal_object_reserved_page_count": { "type": "bigint", "nullable": false },
      "version_store_reserved_page_count": { "type": "bigint", "nullable": false },
      "mixed_extent_page_count": { "type": "bigint", "nullable": false },
      "unallocated_extent_page_count": { "type": "bigint", "nullable": false },
      "user_object_reserved_mb": { "type": "computed", "nullable": false },
      "internal_object_reserved_mb": { "type": "computed", "nullable": false },
      "version_store_reserved_mb": { "type": "computed", "nullable": false },
      "total_reserved_mb": { "type": "computed", "nullable": false },
      "unallocated_mb": { "type": "computed", "nullable": false },
      "top_task_user_objects_mb": { "type": "integer", "nullable": true },
      "top_task_internal_objects_mb": { "type": "integer", "nullable": true },
      "top_task_total_mb": { "type": "integer", "nullable": true },
      "top_task_session_id": { "type": "integer", "nullable": true },
      "total_sessions_using_tempdb": { "type": "integer", "nullable": false },
      "sessions_with_user_objects": { "type": "integer", "nullable": false },
      "sessions_with_internal_objects": { "type": "integer", "nullable": false },
      "version_store_high_warning": { "type": "bit", "nullable": false },
      "allocation_contention_warning": { "type": "bit", "nullable": false }
    },
    "primary_key": ["collection_id"]
  },
  "collect.session_stats": {
    "description": "Session count and status metrics",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "total_sessions": { "type": "integer", "nullable": false },
      "running_sessions": { "type": "integer", "nullable": false },
      "sleeping_sessions": { "type": "integer", "nullable": false },
      "background_sessions": { "type": "integer", "nullable": false },
      "dormant_sessions": { "type": "integer", "nullable": false },
      "idle_sessions_over_30min": { "type": "integer", "nullable": false },
      "sessions_waiting_for_memory": { "type": "integer", "nullable": false },
      "databases_with_connections": { "type": "integer", "nullable": false },
      "top_application_name": { "type": "nvarchar(128)", "nullable": true },
      "top_application_connections": { "type": "integer", "nullable": true },
      "top_host_name": { "type": "nvarchar(128)", "nullable": true },
      "top_host_connections": { "type": "integer", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.procedure_stats": {
    "description": "Procedure, trigger, and function performance statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "object_type": { "type": "nvarchar(20)", "nullable": false, "note": "PROCEDURE, TRIGGER, FUNCTION" },
      "database_name": { "type": "sysname", "nullable": false },
      "object_id": { "type": "integer", "nullable": false },
      "object_name": { "type": "sysname", "nullable": true },
      "schema_name": { "type": "sysname", "nullable": true },
      "type_desc": { "type": "nvarchar(60)", "nullable": true },
      "sql_handle": { "type": "varbinary(64)", "nullable": false },
      "plan_handle": { "type": "varbinary(64)", "nullable": false },
      "cached_time": { "type": "datetime2(7)", "nullable": false },
      "last_execution_time": { "type": "datetime2(7)", "nullable": false },
      "execution_count": { "type": "bigint", "nullable": false },
      "total_worker_time": { "type": "bigint", "nullable": false },
      "min_worker_time": { "type": "bigint", "nullable": false },
      "max_worker_time": { "type": "bigint", "nullable": false },
      "total_elapsed_time": { "type": "bigint", "nullable": false },
      "min_elapsed_time": { "type": "bigint", "nullable": false },
      "max_elapsed_time": { "type": "bigint", "nullable": false },
      "total_logical_reads": { "type": "bigint", "nullable": false },
      "min_logical_reads": { "type": "bigint", "nullable": false },
      "max_logical_reads": { "type": "bigint", "nullable": false },
      "total_physical_reads": { "type": "bigint", "nullable": false },
      "min_physical_reads": { "type": "bigint", "nullable": false },
      "max_physical_reads": { "type": "bigint", "nullable": false },
      "total_logical_writes": { "type": "bigint", "nullable": false },
      "min_logical_writes": { "type": "bigint", "nullable": false },
      "max_logical_writes": { "type": "bigint", "nullable": false },
      "total_spills": { "type": "bigint", "nullable": true },
      "min_spills": { "type": "bigint", "nullable": true },
      "max_spills": { "type": "bigint", "nullable": true },
      "execution_count_delta": { "type": "bigint", "nullable": true },
      "total_worker_time_delta": { "type": "bigint", "nullable": true },
      "total_elapsed_time_delta": { "type": "bigint", "nullable": true },
      "total_logical_reads_delta": { "type": "bigint", "nullable": true },
      "total_physical_reads_delta": { "type": "bigint", "nullable": true },
      "total_logical_writes_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true },
      "avg_worker_time_ms": { "type": "computed", "nullable": true },
      "avg_elapsed_time_ms": { "type": "computed", "nullable": true },
      "avg_physical_reads": { "type": "computed", "nullable": true },
      "worker_time_per_second": { "type": "computed", "nullable": true },
      "query_plan_text": { "type": "nvarchar(max)", "nullable": true },
      "query_plan": { "type": "xml", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.query_store_data": {
    "description": "Query Store performance data collected from enabled databases",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "database_name": { "type": "sysname", "nullable": false },
      "query_id": { "type": "bigint", "nullable": false },
      "plan_id": { "type": "bigint", "nullable": false },
      "execution_type_desc": { "type": "nvarchar(60)", "nullable": true },
      "utc_first_execution_time": { "type": "datetimeoffset(7)", "nullable": false },
      "utc_last_execution_time": { "type": "datetimeoffset(7)", "nullable": false },
      "server_first_execution_time": { "type": "datetime2(7)", "nullable": false },
      "server_last_execution_time": { "type": "datetime2(7)", "nullable": false },
      "module_name": { "type": "nvarchar(261)", "nullable": true },
      "query_sql_text": { "type": "nvarchar(max)", "nullable": true },
      "query_hash": { "type": "binary(8)", "nullable": true },
      "count_executions": { "type": "bigint", "nullable": false },
      "avg_duration": { "type": "bigint", "nullable": false, "note": "microseconds" },
      "min_duration": { "type": "bigint", "nullable": false },
      "max_duration": { "type": "bigint", "nullable": false },
      "avg_cpu_time": { "type": "bigint", "nullable": false, "note": "microseconds" },
      "min_cpu_time": { "type": "bigint", "nullable": false },
      "max_cpu_time": { "type": "bigint", "nullable": false },
      "avg_logical_io_reads": { "type": "bigint", "nullable": false },
      "min_logical_io_reads": { "type": "bigint", "nullable": false },
      "max_logical_io_reads": { "type": "bigint", "nullable": false },
      "avg_logical_io_writes": { "type": "bigint", "nullable": false },
      "min_logical_io_writes": { "type": "bigint", "nullable": false },
      "max_logical_io_writes": { "type": "bigint", "nullable": false },
      "avg_physical_io_reads": { "type": "bigint", "nullable": false },
      "min_physical_io_reads": { "type": "bigint", "nullable": false },
      "max_physical_io_reads": { "type": "bigint", "nullable": false },
      "avg_num_physical_io_reads": { "type": "bigint", "nullable": true, "note": "NULL on SQL 2016" },
      "min_num_physical_io_reads": { "type": "bigint", "nullable": true },
      "max_num_physical_io_reads": { "type": "bigint", "nullable": true },
      "avg_clr_time": { "type": "bigint", "nullable": false, "note": "microseconds" },
      "min_clr_time": { "type": "bigint", "nullable": false },
      "max_clr_time": { "type": "bigint", "nullable": false },
      "min_dop": { "type": "bigint", "nullable": false },
      "max_dop": { "type": "bigint", "nullable": false },
      "avg_query_max_used_memory": { "type": "bigint", "nullable": false, "note": "8KB pages" },
      "min_query_max_used_memory": { "type": "bigint", "nullable": false },
      "max_query_max_used_memory": { "type": "bigint", "nullable": false },
      "avg_rowcount": { "type": "bigint", "nullable": false },
      "min_rowcount": { "type": "bigint", "nullable": false },
      "max_rowcount": { "type": "bigint", "nullable": false },
      "avg_log_bytes_used": { "type": "bigint", "nullable": true },
      "min_log_bytes_used": { "type": "bigint", "nullable": true },
      "max_log_bytes_used": { "type": "bigint", "nullable": true },
      "avg_tempdb_space_used": { "type": "bigint", "nullable": true, "note": "8KB pages" },
      "min_tempdb_space_used": { "type": "bigint", "nullable": true },
      "max_tempdb_space_used": { "type": "bigint", "nullable": true },
      "plan_type": { "type": "nvarchar(60)", "nullable": true },
      "is_forced_plan": { "type": "bit", "nullable": false },
      "force_failure_count": { "type": "bigint", "nullable": true },
      "last_force_failure_reason_desc": { "type": "nvarchar(128)", "nullable": true },
      "plan_forcing_type": { "type": "nvarchar(60)", "nullable": true },
      "compatibility_level": { "type": "smallint", "nullable": true },
      "query_plan_text": { "type": "nvarchar(max)", "nullable": true },
      "compilation_metrics": { "type": "xml", "nullable": true },
      "query_plan_hash": { "type": "binary(8)", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.trace_analysis": {
    "description": "Processed trace file data for query analysis",
    "columns": {
      "analysis_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "trace_file_name": { "type": "nvarchar(260)", "nullable": false },
      "event_class": { "type": "integer", "nullable": false },
      "event_name": { "type": "nvarchar(50)", "nullable": false },
      "database_name": { "type": "nvarchar(128)", "nullable": true },
      "login_name": { "type": "nvarchar(128)", "nullable": true },
      "nt_user_name": { "type": "nvarchar(128)", "nullable": true },
      "application_name": { "type": "nvarchar(256)", "nullable": true },
      "host_name": { "type": "nvarchar(128)", "nullable": true },
      "spid": { "type": "integer", "nullable": true },
      "duration_ms": { "type": "bigint", "nullable": true },
      "cpu_ms": { "type": "bigint", "nullable": true },
      "reads": { "type": "bigint", "nullable": true },
      "writes": { "type": "bigint", "nullable": true },
      "row_counts": { "type": "bigint", "nullable": true },
      "start_time": { "type": "datetime2(7)", "nullable": true },
      "end_time": { "type": "datetime2(7)", "nullable": true },
      "sql_text": { "type": "nvarchar(max)", "nullable": true },
      "object_id": { "type": "bigint", "nullable": true },
      "client_process_id": { "type": "integer", "nullable": true },
      "session_context": { "type": "nvarchar(500)", "nullable": true }
    },
    "primary_key": ["analysis_id"]
  },
  "collect.default_trace_events": {
    "description": "System events from SQL Server default trace",
    "columns": {
      "event_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "event_time": { "type": "datetime2(7)", "nullable": false },
      "event_name": { "type": "nvarchar(128)", "nullable": false },
      "event_class": { "type": "integer", "nullable": false },
      "spid": { "type": "integer", "nullable": true },
      "database_name": { "type": "sysname", "nullable": true },
      "database_id": { "type": "integer", "nullable": true },
      "login_name": { "type": "nvarchar(128)", "nullable": true },
      "host_name": { "type": "nvarchar(128)", "nullable": true },
      "application_name": { "type": "nvarchar(256)", "nullable": true },
      "server_name": { "type": "nvarchar(128)", "nullable": true },
      "object_name": { "type": "sysname", "nullable": true },
      "filename": { "type": "nvarchar(260)", "nullable": true },
      "integer_data": { "type": "bigint", "nullable": true },
      "integer_data_2": { "type": "bigint", "nullable": true },
      "text_data": { "type": "nvarchar(max)", "nullable": true },
      "binary_data": { "type": "varbinary(max)", "nullable": true },
      "session_login_name": { "type": "nvarchar(128)", "nullable": true },
      "error_number": { "type": "integer", "nullable": true },
      "severity": { "type": "integer", "nullable": true },
      "state": { "type": "integer", "nullable": true },
      "event_sequence": { "type": "bigint", "nullable": true },
      "is_system": { "type": "bit", "nullable": true },
      "request_id": { "type": "integer", "nullable": true }
    },
    "primary_key": ["event_id"]
  },
  "collect.memory_grant_stats": {
    "description": "Memory grant statistics from resource semaphore",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "resource_semaphore_id": { "type": "smallint", "nullable": false },
      "pool_id": { "type": "integer", "nullable": false },
      "target_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "max_target_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "total_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "available_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "granted_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "used_memory_mb": { "type": "decimal(19,2)", "nullable": true },
      "grantee_count": { "type": "integer", "nullable": true },
      "waiter_count": { "type": "integer", "nullable": true },
      "timeout_error_count": { "type": "bigint", "nullable": true },
      "forced_grant_count": { "type": "bigint", "nullable": true },
      "available_memory_pressure_warning": { "type": "bit", "nullable": true },
      "waiter_count_warning": { "type": "bit", "nullable": true },
      "timeout_error_warning": { "type": "bit", "nullable": true },
      "forced_grant_warning": { "type": "bit", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.cpu_scheduler_stats": {
    "description": "CPU scheduler statistics including worker threads and OS memory",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "max_workers_count": { "type": "integer", "nullable": true },
      "scheduler_count": { "type": "integer", "nullable": true },
      "cpu_count": { "type": "integer", "nullable": true },
      "total_runnable_tasks_count": { "type": "integer", "nullable": true },
      "total_work_queue_count": { "type": "integer", "nullable": true },
      "total_current_workers_count": { "type": "integer", "nullable": true },
      "avg_runnable_tasks_count": { "type": "decimal(38,2)", "nullable": true },
      "total_active_request_count": { "type": "integer", "nullable": true },
      "total_queued_request_count": { "type": "integer", "nullable": true },
      "total_blocked_task_count": { "type": "integer", "nullable": true },
      "total_active_parallel_thread_count": { "type": "integer", "nullable": true },
      "runnable_request_count": { "type": "integer", "nullable": true },
      "total_request_count": { "type": "integer", "nullable": true },
      "runnable_percent": { "type": "decimal(38,2)", "nullable": true },
      "worker_thread_exhaustion_warning": { "type": "bit", "nullable": true },
      "runnable_tasks_warning": { "type": "bit", "nullable": true },
      "blocked_tasks_warning": { "type": "bit", "nullable": true },
      "queued_requests_warning": { "type": "bit", "nullable": true },
      "total_physical_memory_kb": { "type": "bigint", "nullable": true },
      "available_physical_memory_kb": { "type": "bigint", "nullable": true },
      "system_memory_state_desc": { "type": "nvarchar(120)", "nullable": true },
      "physical_memory_pressure_warning": { "type": "bit", "nullable": true },
      "total_node_count": { "type": "integer", "nullable": true },
      "nodes_online_count": { "type": "integer", "nullable": true },
      "offline_cpu_count": { "type": "integer", "nullable": true },
      "offline_cpu_warning": { "type": "bit", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.memory_clerks_stats": {
    "description": "Memory clerk statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "clerk_type": { "type": "nvarchar(60)", "nullable": false },
      "memory_node_id": { "type": "smallint", "nullable": false },
      "pages_kb": { "type": "bigint", "nullable": true },
      "virtual_memory_reserved_kb": { "type": "bigint", "nullable": true },
      "virtual_memory_committed_kb": { "type": "bigint", "nullable": true },
      "awe_allocated_kb": { "type": "bigint", "nullable": true },
      "shared_memory_reserved_kb": { "type": "bigint", "nullable": true },
      "shared_memory_committed_kb": { "type": "bigint", "nullable": true },
      "pages_kb_delta": { "type": "bigint", "nullable": true },
      "virtual_memory_reserved_kb_delta": { "type": "bigint", "nullable": true },
      "virtual_memory_committed_kb_delta": { "type": "bigint", "nullable": true },
      "awe_allocated_kb_delta": { "type": "bigint", "nullable": true },
      "shared_memory_reserved_kb_delta": { "type": "bigint", "nullable": true },
      "shared_memory_committed_kb_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.perfmon_stats": {
    "description": "Performance monitor counter statistics",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "object_name": { "type": "sysname", "nullable": false },
      "counter_name": { "type": "sysname", "nullable": false },
      "instance_name": { "type": "sysname", "nullable": false },
      "cntr_value": { "type": "bigint", "nullable": false },
      "cntr_type": { "type": "bigint", "nullable": false },
      "cntr_value_delta": { "type": "bigint", "nullable": true }
    },
    "primary_key": ["collection_id"]
  },
  "collect.deadlocks": {
    "description": "Parsed deadlock events from sp_BlitzLock",
    "columns": {
      "deadlock_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "ServerName": { "type": "nvarchar(256)", "nullable": true },
      "deadlock_type": { "type": "nvarchar(256)", "nullable": true },
      "event_date": { "type": "datetime", "nullable": true },
      "database_name": { "type": "nvarchar(256)", "nullable": true },
      "spid": { "type": "smallint", "nullable": true },
      "deadlock_group": { "type": "nvarchar(256)", "nullable": true },
      "query": { "type": "xml", "nullable": true },
      "object_names": { "type": "xml", "nullable": true },
      "isolation_level": { "type": "nvarchar(256)", "nullable": true },
      "owner_mode": { "type": "nvarchar(256)", "nullable": true },
      "waiter_mode": { "type": "nvarchar(256)", "nullable": true },
      "lock_mode": { "type": "nvarchar(256)", "nullable": true },
      "transaction_count": { "type": "bigint", "nullable": true },
      "client_option_1": { "type": "varchar(500)", "nullable": true },
      "client_option_2": { "type": "varchar(500)", "nullable": true },
      "login_name": { "type": "nvarchar(256)", "nullable": true },
      "host_name": { "type": "nvarchar(256)", "nullable": true },
      "client_app": { "type": "nvarchar(1024)", "nullable": true },
      "wait_time": { "type": "bigint", "nullable": true },
      "wait_resource": { "type": "nvarchar(max)", "nullable": true },
      "priority": { "type": "smallint", "nullable": true },
      "log_used": { "type": "bigint", "nullable": true },
      "last_tran_started": { "type": "datetime", "nullable": true },
      "last_batch_started": { "type": "datetime", "nullable": true },
      "last_batch_completed": { "type": "datetime", "nullable": true },
      "transaction_name": { "type": "nvarchar(256)", "nullable": true },
      "status": { "type": "nvarchar(256)", "nullable": true },
      "owner_waiter_type": { "type": "nvarchar(256)", "nullable": true },
      "owner_activity": { "type": "nvarchar(256)", "nullable": true },
      "owner_waiter_activity": { "type": "nvarchar(256)", "nullable": true },
      "owner_merging": { "type": "nvarchar(256)", "nullable": true },
      "owner_spilling": { "type": "nvarchar(256)", "nullable": true },
      "owner_waiting_to_close": { "type": "nvarchar(256)", "nullable": true },
      "waiter_waiter_type": { "type": "nvarchar(256)", "nullable": true },
      "waiter_owner_activity": { "type": "nvarchar(256)", "nullable": true },
      "waiter_waiter_activity": { "type": "nvarchar(256)", "nullable": true },
      "waiter_merging": { "type": "nvarchar(256)", "nullable": true },
      "waiter_spilling": { "type": "nvarchar(256)", "nullable": true },
      "waiter_waiting_to_close": { "type": "nvarchar(256)", "nullable": true },
      "deadlock_graph": { "type": "xml", "nullable": true }
    },
    "primary_key": ["collection_time", "deadlock_id"]
  },
  "collect.blocking_BlockedProcessReport": {
    "description": "Parsed blocked process events from sp_HumanEventsBlockViewer",
    "columns": {
      "blocking_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "blocked_process_report": { "type": "varchar(22)", "nullable": false },
      "event_time": { "type": "datetime2(7)", "nullable": true },
      "database_name": { "type": "nvarchar(128)", "nullable": true },
      "currentdbname": { "type": "nvarchar(256)", "nullable": true },
      "contentious_object": { "type": "nvarchar(4000)", "nullable": true },
      "activity": { "type": "varchar(8)", "nullable": true },
      "blocking_tree": { "type": "varchar(8000)", "nullable": true },
      "spid": { "type": "integer", "nullable": true },
      "ecid": { "type": "integer", "nullable": true },
      "query_text": { "type": "xml", "nullable": true },
      "wait_time_ms": { "type": "bigint", "nullable": true },
      "status": { "type": "nvarchar(10)", "nullable": true },
      "isolation_level": { "type": "nvarchar(50)", "nullable": true },
      "lock_mode": { "type": "nvarchar(10)", "nullable": true },
      "resource_owner_type": { "type": "nvarchar(256)", "nullable": true },
      "transaction_count": { "type": "integer", "nullable": true },
      "transaction_name": { "type": "nvarchar(1024)", "nullable": true },
      "last_transaction_started": { "type": "datetime2(7)", "nullable": true },
      "last_transaction_completed": { "type": "datetime2(7)", "nullable": true },
      "client_option_1": { "type": "varchar(261)", "nullable": true },
      "client_option_2": { "type": "varchar(307)", "nullable": true },
      "wait_resource": { "type": "nvarchar(1024)", "nullable": true },
      "priority": { "type": "integer", "nullable": true },
      "log_used": { "type": "bigint", "nullable": true },
      "client_app": { "type": "nvarchar(256)", "nullable": true },
      "host_name": { "type": "nvarchar(256)", "nullable": true },
      "login_name": { "type": "nvarchar(256)", "nullable": true },
      "transaction_id": { "type": "bigint", "nullable": true },
      "blocked_process_report_xml": { "type": "xml", "nullable": true }
    },
    "primary_key": ["collection_time", "blocking_id"]
  },
  "collect.latch_stats": {
    "description": "Latch statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "latch_class": { "type": "nvarchar(60)", "nullable": false },
      "waiting_requests_count": { "type": "bigint", "nullable": false },
      "wait_time_ms": { "type": "bigint", "nullable": false },
      "max_wait_time_ms": { "type": "bigint", "nullable": false },
      "waiting_requests_count_delta": { "type": "bigint", "nullable": true },
      "wait_time_ms_delta": { "type": "bigint", "nullable": true },
      "max_wait_time_ms_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true },
      "wait_time_ms_per_second": { "type": "computed", "nullable": true, "formula": "wait_time_ms_delta / NULLIF(sample_interval_seconds, 0)" },
      "waiting_requests_count_per_second": { "type": "computed", "nullable": true, "formula": "waiting_requests_count_delta / NULLIF(sample_interval_seconds, 0)" }
    },
    "primary_key": ["collection_id"]
  },
  "collect.spinlock_stats": {
    "description": "Spinlock statistics with delta calculations",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "server_start_time": { "type": "datetime2(7)", "nullable": false },
      "spinlock_name": { "type": "nvarchar(256)", "nullable": false },
      "collisions": { "type": "bigint", "nullable": false },
      "spins": { "type": "bigint", "nullable": false },
      "spins_per_collision": { "type": "decimal(38,2)", "nullable": false },
      "sleep_time": { "type": "bigint", "nullable": false },
      "backoffs": { "type": "bigint", "nullable": false },
      "collisions_delta": { "type": "bigint", "nullable": true },
      "spins_delta": { "type": "bigint", "nullable": true },
      "sleep_time_delta": { "type": "bigint", "nullable": true },
      "backoffs_delta": { "type": "bigint", "nullable": true },
      "sample_interval_seconds": { "type": "integer", "nullable": true },
      "collisions_per_second": { "type": "computed", "nullable": true, "formula": "collisions_delta / NULLIF(sample_interval_seconds, 0)" },
      "spins_per_second": { "type": "computed", "nullable": true, "formula": "spins_delta / NULLIF(sample_interval_seconds, 0)" }
    },
    "primary_key": ["collection_id"]
  },
  "collect.plan_cache_stats": {
    "description": "Plan cache composition statistics by object type",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "cacheobjtype": { "type": "nvarchar(34)", "nullable": false },
      "objtype": { "type": "nvarchar(16)", "nullable": false },
      "total_plans": { "type": "integer", "nullable": false },
      "total_size_mb": { "type": "integer", "nullable": false },
      "single_use_plans": { "type": "integer", "nullable": false },
      "single_use_size_mb": { "type": "integer", "nullable": false },
      "multi_use_plans": { "type": "integer", "nullable": false },
      "multi_use_size_mb": { "type": "integer", "nullable": false },
      "avg_use_count": { "type": "decimal(38,2)", "nullable": false },
      "avg_size_kb": { "type": "integer", "nullable": false }
    },
    "primary_key": ["collection_id"]
  },
  "collect.waiting_tasks": {
    "description": "Currently waiting tasks snapshot for wait analysis",
    "columns": {
      "collection_id": { "type": "bigint", "nullable": false, "identity": true },
      "collection_time": { "type": "datetime2(7)", "nullable": false },
      "session_id": { "type": "integer", "nullable": false },
      "wait_type": { "type": "nvarchar(60)", "nullable": false },
      "wait_duration_ms": { "type": "bigint", "nullable": false },
      "blocking_session_id": { "type": "integer", "nullable": false },
      "resource_description": { "type": "nvarchar(1000)", "nullable": true },
      "database_id": { "type": "integer", "nullable": true },
      "database_name": { "type": "sysname", "nullable": true },
      "query_text": { "type": "nvarchar(max)", "nullable": true },
      "statement_text": { "type": "nvarchar(max)", "nullable": true },
      "query_plan": { "type": "nvarchar(max)", "nullable": true },
      "sql_handle": { "type": "varbinary(64)", "nullable": true },
      "plan_handle": { "type": "varbinary(64)", "nullable": true },
      "request_status": { "type": "nvarchar(30)", "nullable": true },
      "command": { "type": "nvarchar(32)", "nullable": true },
      "cpu_time_ms": { "type": "integer", "nullable": true },
      "total_elapsed_time_ms": { "type": "integer", "nullable": true },
      "logical_reads": { "type": "bigint", "nullable": true },
      "writes": { "type": "bigint", "nullable": true },
      "row_count": { "type": "bigint", "nullable": true }
    },
    "primary_key": ["collection_id"]
  }
}
